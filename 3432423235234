local Library = loadstring(game:HttpGet("https://github.com/ActualMasterOogway/Fluent-Renewed/releases/latest/download/Fluent.luau"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/SaveManager.luau"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/InterfaceManager.luau"))()
local le = loadstring(game:HttpGet('https://raw.githubusercontent.com/zawerex/Conexion1/refs/heads/main/conexion1'))()

-- Services
local Players, RunService, Workspace, UIS = game:GetService("Players"), game:GetService("RunService"), game:GetService("Workspace"), game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

-- Variables
local limbs, espObjects, currentTargets, teleportedObjects, autoFarmProcessedObjects = {}, {}, {}, {}, {}
local connections = { esp = nil, autoCollect = nil, autoFarm = nil }
local lastTeleportTime, noclipConnection, flyConnection, bodyVelocity = 0

-- Settings
local ESP_ENABLED = false
local AUTO_COLLECT_ENABLED = false
local AUTO_TELEPORT_ENABLED = false
local AUTO_FIRE = false
local AUTO_FARM_ENABLED = false
local NOCLIP_ENABLED = false
local FLY_ENABLED = false
local WALKSPEED_ENABLED = false
local JUMPPOWER_ENABLED = false
local autoFarmIsActive = true

local SCAN_RADIUS = 30
local TELEPORT_COOLDOWN = 0.5
local currentFlySpeed = 50
local currentWalkSpeed = 16
local currentJumpPower = 50
local defaultWalkSpeed = 16
local defaultJumpPower = 50
local AUTO_FARM_RETURN_DELAY = 1
local AUTO_FARM_TELEPORT_DELAY = 0.3
local AUTO_FARM_CHECK_INTERVAL = 2

local flyKeys = { W = false, A = false, S = false, D = false, Up = false, Down = false }

-- ESP Folder
local espFolder = Instance.new("Folder")
espFolder.Name = "TargetESP"
if not workspace:FindFirstChild("TargetESP") then 
    espFolder.Parent = workspace 
else 
    espFolder = workspace.TargetESP 
end

-- Utility functions
local function updateLimbsList()
    local character = LocalPlayer.Character
    if not character then return end
    limbs = {}
    for _, child in ipairs(character:GetChildren()) do
        if child:IsA("BasePart") then table.insert(limbs, child.Name) end
    end
    table.sort(limbs)
end

local function findAllTargetPrompts()
    local targets = {}
    for _, obj in ipairs(Workspace:GetChildren()) do
        if obj.Name == "" then
            local promptAttachment = obj:FindFirstChild("PromptAttachment")
            if promptAttachment then
                local prompt = promptAttachment:FindFirstChild("ProximityPrompt")
                if prompt and prompt:IsA("ProximityPrompt") then
                    table.insert(targets, {prompt = prompt, object = obj})
                end
            end
        end
    end
    return targets
end

local function fireProximity(prompt)
    if prompt and prompt:IsA("ProximityPrompt") and prompt.Enabled then
        return pcall(function() 
            local originalHoldDuration = prompt.HoldDuration
            prompt.HoldDuration = 0 
            fireproximityprompt(prompt)
            prompt.HoldDuration = originalHoldDuration
        end)
    end
    return false
end

local function teleportToPosition(position)
    local character = LocalPlayer.Character
    if not character then return false end
    
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp then return false end
    
    return pcall(function()
        hrp.CFrame = CFrame.new(position)
        Workspace.CurrentCamera.CFrame = hrp.CFrame
    end)
end

-- ESP functions
local function createESP(targetObject)
    if not targetObject or espObjects[targetObject] then return false end
    
    local mainBillboard = Instance.new("BillboardGui")
    mainBillboard.Name = "ESPBillboard"
    mainBillboard.Size = UDim2.new(0, 250, 0, 60)
    mainBillboard.StudsOffset = Vector3.new(0, 4, 0)
    mainBillboard.AlwaysOnTop = true
    mainBillboard.Adornee = targetObject
    mainBillboard.Parent = espFolder
    
    local container = Instance.new("Frame")
    container.Size = UDim2.new(1, 0, 1, 0)
    container.BackgroundTransparency = 1
    container.Parent = mainBillboard
    
    local uiListLayout = Instance.new("UIListLayout")
    uiListLayout.FillDirection = Enum.FillDirection.Horizontal
    uiListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    uiListLayout.VerticalAlignment = Enum.VerticalAlignment.Center
    uiListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    uiListLayout.Padding = UDim.new(0, 5)
    uiListLayout.Parent = container
    
    local iconLabel = Instance.new("TextLabel")
    iconLabel.Name = "Icon"
    iconLabel.Size = UDim2.new(0, 40, 0, 40)
    iconLabel.BackgroundTransparency = 1
    iconLabel.TextColor3 = Color3.fromRGB(255, 0, 0)
    iconLabel.TextStrokeTransparency = 0.5
    iconLabel.TextStrokeColor3 = Color3.fromRGB(255, 255, 255)
    iconLabel.Font = Enum.Font.GothamBold
    iconLabel.TextSize = 30
    iconLabel.Text = "üéÉ"
    iconLabel.LayoutOrder = 1
    iconLabel.Parent = container
    
    local distanceLabel = Instance.new("TextLabel")
    distanceLabel.Name = "Distance"
    distanceLabel.Size = UDim2.new(0, 180, 0, 40)
    distanceLabel.BackgroundTransparency = 1
    distanceLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    distanceLabel.TextStrokeTransparency = 0
    distanceLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    distanceLabel.Font = Enum.Font.GothamBold
    distanceLabel.TextSize = 16
    distanceLabel.Text = "Target: 0 studs"
    distanceLabel.TextXAlignment = Enum.TextXAlignment.Left
    distanceLabel.LayoutOrder = 2
    distanceLabel.Parent = container
    
    espObjects[targetObject] = {
        billboard = mainBillboard,
        distanceLabel = distanceLabel
    }
    return true
end

local function removeESPForObject(targetObject)
    if espObjects[targetObject] then
        espObjects[targetObject].billboard:Destroy()
        espObjects[targetObject] = nil
    end
end

local function removeAllESP()
    for targetObject, esp in pairs(espObjects) do
        if esp and esp.billboard then 
            esp.billboard:Destroy() 
        end
    end
    espObjects = {}
    currentTargets = {}
end

local function updateAllESPDistances()
    local character = LocalPlayer.Character
    if not character then return end
    
    local hrp = character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("UpperTorso") or character:FindFirstChild("Torso")
    if not hrp then return end
    
    for targetObject, esp in pairs(espObjects) do
        if targetObject and targetObject.Parent and esp and esp.distanceLabel then
            local distance = (targetObject.Position - hrp.Position).Magnitude
            esp.distanceLabel.Text = string.format("Distance: %.1f studs", distance)
        else
            removeESPForObject(targetObject)
        end
    end
end

local function createESPForAllObjects()
    if not ESP_ENABLED then return end
    local targets = findAllTargetPrompts()
    
    for _, targetData in ipairs(targets) do
        if not espObjects[targetData.object] then
            createESP(targetData.object)
        end
    end
    
    for targetObject, _ in pairs(espObjects) do
        local found = false
        for _, targetData in ipairs(targets) do
            if targetData.object == targetObject then 
                found = true 
                break 
            end
        end
        if not found then 
            removeESPForObject(targetObject) 
        end
    end
    
    currentTargets = targets
end

local function startESPLoop()
    if connections.esp then
        connections.esp:Disconnect()
    end
    
    connections.esp = RunService.Heartbeat:Connect(function()
        if ESP_ENABLED then 
            createESPForAllObjects() 
            updateAllESPDistances()
        else 
            if connections.esp then 
                connections.esp:Disconnect()
                connections.esp = nil
                removeAllESP() 
            end 
        end
    end)
end

-- Auto Collect functions
local function teleportToTarget(targetObject)
    local character = LocalPlayer.Character
    if not character then return false end
    
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp or not targetObject then return false end
    
    local success = pcall(function()
        local targetCFrame = targetObject.CFrame
        local teleportPosition = targetCFrame.Position + targetCFrame.LookVector * 4
        hrp.CFrame = CFrame.new(teleportPosition, targetCFrame.Position)
        Workspace.CurrentCamera.CFrame = hrp.CFrame
    end)
    
    return success
end

local function performAutoTeleport()
    local currentTime = tick()
    if currentTime - lastTeleportTime < TELEPORT_COOLDOWN then
        return false
    end
    
    local targets = findAllTargetPrompts()
    
    -- –û—á–∏—â–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
    for targetObject, _ in pairs(teleportedObjects) do
        if not targetObject or not targetObject.Parent then
            teleportedObjects[targetObject] = nil
        else
            local objectStillExists = false
            for _, targetData in ipairs(targets) do
                if targetData.object == targetObject then
                    objectStillExists = true
                    break
                end
            end
            if not objectStillExists then
                teleportedObjects[targetObject] = nil
            end
        end
    end
    
    if #targets == 0 then 
        teleportedObjects = {}
        return false
    end
    
    -- –ù–∞—Ö–æ–¥–∏–º –ø–µ—Ä–≤—ã–π –æ–±—ä–µ–∫—Ç, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –µ—â–µ –Ω–µ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å
    local targetToTeleport = nil
    for _, targetData in ipairs(targets) do
        if not teleportedObjects[targetData.object] then
            targetToTeleport = targetData.object
            break
        end
    end
    
    -- –ï—Å–ª–∏ –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –æ—á–∏—â–∞–µ–º —Å–ø–∏—Å–æ–∫ –∏ –Ω–∞—á–∏–Ω–∞–µ–º –∑–∞–Ω–æ–≤–æ
    if not targetToTeleport then
        teleportedObjects = {}
        if #targets > 0 then
            targetToTeleport = targets[1].object
        else
            return false
        end
    end
    
    -- –¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ–º—Å—è –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É
    local teleportSuccess = teleportToTarget(targetToTeleport)
    
    if teleportSuccess then
        teleportedObjects[targetToTeleport] = true
        lastTeleportTime = currentTime
        return true
    end
    
    return false
end

local function startAutoCollect()
    if connections.autoCollect then
        connections.autoCollect:Disconnect()
    end
    
    connections.autoCollect = RunService.Heartbeat:Connect(function()
        if not AUTO_COLLECT_ENABLED then 
            if connections.autoCollect then 
                connections.autoCollect:Disconnect()
                connections.autoCollect = nil
            end 
            return 
        end
        
        local character = LocalPlayer.Character
        if not character then return end
        
        local hrp = character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("UpperTorso") or character:FindFirstChild("Torso")
        if not hrp then return end
        
        local targets = findAllTargetPrompts()
        if #targets == 0 then 
            teleportedObjects = {}
            return 
        end
        
        if AUTO_TELEPORT_ENABLED then
            performAutoTeleport()
        end
        
        if AUTO_FIRE then
            for _, targetData in ipairs(targets) do
                local distance = (targetData.object.Position - hrp.Position).Magnitude
                if distance <= SCAN_RADIUS and targetData.prompt.Enabled then 
                    fireProximity(targetData.prompt) 
                end
            end
        end
    end)
end

-- Auto Farm functions
local function returnToZero()
    local character = LocalPlayer.Character
    if not character then return false end
    
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp then return false end
    
    return pcall(function()
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid:ChangeState(Enum.HumanoidStateType.Flying)
        end
        
        local zeroPosition = Vector3.new(0, 500, 0)
        hrp.CFrame = CFrame.new(zeroPosition)
        Workspace.CurrentCamera.CFrame = hrp.CFrame
        
        return true
    end)
end

local function processAllAutoFarmObjects()
    if not autoFarmIsActive then return false end
    
    local targets = findAllTargetPrompts()
    if #targets == 0 then 
        return false
    end
    
    local validTargets = {}
    for _, targetData in ipairs(targets) do
        if targetData.object and targetData.object.Parent and targetData.prompt and targetData.prompt:IsA("ProximityPrompt") and targetData.prompt.Enabled then
            table.insert(validTargets, targetData)
        end
    end
    
    if #validTargets == 0 then
        return false
    end
    
    local character = LocalPlayer.Character
    if not character then return false end
    
    local processedInThisCycle = false
    
    for _, targetData in ipairs(validTargets) do
        if not autoFarmIsActive then break end
        
        local targetToTeleport = targetData.object
        local prompt = targetData.prompt

        local teleportSuccess = teleportToTarget(targetToTeleport)
        
        if teleportSuccess then
            processedInThisCycle = true
            
            task.wait(0.5)
            
            if prompt and prompt.Enabled then
                for i = 1, 3 do
                    fireProximity(prompt)
                    task.wait(0.1)
                end
            end
            
            autoFarmProcessedObjects[targetToTeleport] = true
            
            task.wait(AUTO_FARM_TELEPORT_DELAY)
        end
    end
    
    if processedInThisCycle then
        task.wait(AUTO_FARM_RETURN_DELAY)
        returnToZero()
        return true
    end
    
    return false
end

local function startAutoFarmCycle()
    returnToZero()
    task.wait(2)
    
    while true do
        if not autoFarmIsActive then
            task.wait(1)
        else
            autoFarmProcessedObjects = {}
            processAllAutoFarmObjects()
            task.wait(AUTO_FARM_CHECK_INTERVAL)
        end
    end
end

local function initializeAutoFarm()
    task.spawn(startAutoFarmCycle)
end

-- Movement functions
local function updateNoClip()
    if noclipConnection then
        noclipConnection:Disconnect()
        noclipConnection = nil
    end
    
    if NOCLIP_ENABLED then
        noclipConnection = RunService.Stepped:Connect(function()
            if NOCLIP_ENABLED then
                for _, b in pairs(Workspace:GetChildren()) do
                    if b.Name == LocalPlayer.Name then
                        for _, v in pairs(b:GetChildren()) do
                            if v:IsA("BasePart") then
                                v.CanCollide = false
                            end
                        end
                    end
                end
            end
        end)
    else
        for _, b in pairs(Workspace:GetChildren()) do
            if b.Name == LocalPlayer.Name then
                for _, v in pairs(b:GetChildren()) do
                    if v:IsA("BasePart") then
                        v.CanCollide = true
                    end
                end
            end
        end
    end
end

local function updateFly()
    if flyConnection then
        flyConnection:Disconnect()
        flyConnection = nil
    end
    
    if bodyVelocity then
        bodyVelocity:Destroy()
        bodyVelocity = nil
    end
    
    if FLY_ENABLED and LocalPlayer.Character then
        local root = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if not root then return end
        
        bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.Name = "FlyVelocity"
        bodyVelocity.MaxForce = Vector3.new(40000, 40000, 40000)
        bodyVelocity.Velocity = Vector3.zero
        bodyVelocity.Parent = root
        
        local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.PlatformStand = false
        end
        
        flyConnection = RunService.RenderStepped:Connect(function()
            if FLY_ENABLED and root and bodyVelocity then
                local cam = workspace.CurrentCamera
                local dir = Vector3.zero
                
                if flyKeys.W then dir = dir + cam.CFrame.LookVector end
                if flyKeys.S then dir = dir - cam.CFrame.LookVector end
                if flyKeys.A then dir = dir - cam.CFrame.RightVector end
                if flyKeys.D then dir = dir + cam.CFrame.RightVector end
                if flyKeys.Up then dir = dir + Vector3.new(0, 1, 0) end
                if flyKeys.Down then dir = dir - Vector3.new(0, 1, 0) end
                
                if dir.Magnitude > 0 then
                    bodyVelocity.Velocity = dir.Unit * currentFlySpeed
                else
                    bodyVelocity.Velocity = Vector3.zero
                end
            end
        end)
    else
        if LocalPlayer.Character then
            local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.PlatformStand = false
            end
        end
    end
end

local function updateWalkSpeed()
    if LocalPlayer.Character then
        local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            if WALKSPEED_ENABLED then
                humanoid.WalkSpeed = currentWalkSpeed
            else
                humanoid.WalkSpeed = defaultWalkSpeed
            end
        end
    end
end

local function updateJumpPower()
    if LocalPlayer.Character then
        local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            if JUMPPOWER_ENABLED then
                humanoid.JumpPower = currentJumpPower
            else
                humanoid.JumpPower = defaultJumpPower
            end
        end
    end
end

-- Input handling
local function handleFlyInput(input, isBeginning)
    if not FLY_ENABLED then return end
    
    local key = input.KeyCode
    if key == Enum.KeyCode.W then flyKeys.W = isBeginning
    elseif key == Enum.KeyCode.A then flyKeys.A = isBeginning
    elseif key == Enum.KeyCode.S then flyKeys.S = isBeginning
    elseif key == Enum.KeyCode.D then flyKeys.D = isBeginning
    elseif key == Enum.KeyCode.Space then flyKeys.Up = isBeginning
    elseif key == Enum.KeyCode.LeftShift then flyKeys.Down = isBeginning end
end

UIS.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    handleFlyInput(input, true)
end)

UIS.InputEnded:Connect(function(input)
    handleFlyInput(input, false)
end)

-- GUI
local function initializeGUI()
    if _G.NexusGUIInitialized then
        return
    end
    _G.NexusGUIInitialized = true
    
    local Window = Library:CreateWindow({
        Title = "Nexus v1.0.0",
        SubTitle = "üçÅ",
        TabWidth = 100,
        Size = UDim2.fromOffset(500, 310),
        Acrylic = false,
        Theme = "Dark",
        MinimizeKey = Enum.KeyCode.LeftAlt
    })

    local Tabs = {
        legit = Window:AddTab({ Title = "Legit", Icon = "github" }),
        farm = Window:AddTab({ Title = "Farm", Icon = "package" }),
        rage = Window:AddTab({ Title = "Rage", Icon = "venetian-mask" }),
        settings = Window:AddTab({ Title = "Settings", Icon = "settings" })
    }

    local Options = Library.Options

    -- Legit Tab
    Tabs.legit:CreateSection("Aim")
    
    local AimBotToggle = Tabs.legit:CreateToggle("AimBot", {
        Title = "AimBot [In Development]",
        Description = "Function in development",
        Default = false
    })
    
    AimBotToggle:OnChanged(function(Value)
        if Value then
            print("AimBot enabled (in development)")
        else
            print("AimBot disabled")
        end
    end)

    Tabs.legit:CreateSection("Hitbox Expander")
    
    local HitboxToggle = Tabs.legit:CreateToggle("HitboxExpander", {
        Title = "Hitbox Expander",
        Default = false
    })
    
    HitboxToggle:OnChanged(function() 
        le.toggleState(Options.HitboxExpander.Value) 
    end)

    Tabs.legit:CreateSlider("HitboxSize", {
        Title = "Hitbox Size",
        Description = "Hitbox size (5-50)",
        Default = le.LIMB_SIZE or 10,
        Min = 5,
        Max = 50,
        Rounding = 1,
        Callback = function(value)
            le.LIMB_SIZE = value
            if Options.HitboxExpander.Value then 
                le.toggleState(false)
                le.toggleState(true)
            end
        end
    })

    Tabs.legit:CreateSlider("HitboxTransparency", {
        Title = "Hitbox Transparency",
        Description = "Hitbox transparency",
        Default = le.LIMB_TRANSPARENCY or 0.5,
        Min = 0,
        Max = 1,
        Rounding = 2,
        Callback = function(value)
            le.LIMB_TRANSPARENCY = value
            if Options.HitboxExpander.Value then 
                le.toggleState(false)
                le.toggleState(true)
            end
        end
    })

    local CollisionToggle = Tabs.legit:CreateToggle("LimbCollisions", {
        Title = "Limb Collisions",
        Default = le.LIMB_CAN_COLLIDE or false
    })
    
    CollisionToggle:OnChanged(function()
        le.LIMB_CAN_COLLIDE = Options.LimbCollisions.Value
        if Options.HitboxExpander.Value then 
            le.toggleState(false)
            le.toggleState(true)
        end
    end)

    local LimbDropdown = Tabs.legit:CreateDropdown("TargetLimb", {
        Title = "Target Limb",
        Description = "Select body part to expand",
        Values = limbs,
        Default = le.TARGET_LIMB or "HumanoidRootPart",
        Multi = false,
        Callback = function(value)
            le.TARGET_LIMB = value
            if Options.HitboxExpander.Value then 
                le.toggleState(false)
                le.toggleState(true)
            end
        end
    })

    if #limbs > 0 then
        Options.TargetLimb:SetValues(limbs)
        if not table.find(limbs, le.TARGET_LIMB) then
            le.TARGET_LIMB = "HumanoidRootPart"
            Options.TargetLimb:SetValue("HumanoidRootPart")
        end
    end

    -- Farm Tab
    Tabs.farm:CreateSection("Auto Farm")

    local AutoFarmToggle = Tabs.farm:CreateToggle("AutoFarm", {
        Title = "Auto Farm",
        Default = false
    })

    AutoFarmToggle:OnChanged(function()
        AUTO_FARM_ENABLED = Options.AutoFarm.Value
        autoFarmIsActive = AUTO_FARM_ENABLED
        
        if AUTO_FARM_ENABLED then
            initializeAutoFarm()
        else
            autoFarmProcessedObjects = {}
        end
    end)

    Tabs.farm:CreateSection("AutoCollect")
    
    local AutoCollectToggle = Tabs.farm:CreateToggle("AutoCollect", {
        Title = "AutoCollect",
        Default = false
    })
    
    AutoCollectToggle:OnChanged(function()
        AUTO_COLLECT_ENABLED = Options.AutoCollect.Value
        AUTO_TELEPORT_ENABLED = Options.AutoCollect.Value
        AUTO_FIRE = Options.AutoCollect.Value
        
        if AUTO_COLLECT_ENABLED then
            startAutoCollect()
        else
            teleportedObjects = {}
        end
    end)

    local EspChestsToggle = Tabs.farm:CreateToggle("EspChests", {
        Title = "Esp Chests",
        Default = false
    })
    
    EspChestsToggle:OnChanged(function()
        ESP_ENABLED = Options.EspChests.Value
        
        if ESP_ENABLED then
            createESPForAllObjects()
            startESPLoop()
        else
            removeAllESP()
        end
    end)

    -- Rage Tab
    Tabs.rage:CreateSection("Movement")
    
    local NoClipToggle = Tabs.rage:CreateToggle("NoClip", {
        Title = "NoClip",
        Description = "Disables collision with objects",
        Default = false
    })
    
    NoClipToggle:OnChanged(function(Value)
        NOCLIP_ENABLED = Value
        updateNoClip()
    end)

    local FlyToggle = Tabs.rage:CreateToggle("Fly", {
        Title = "Fly",
        Description = "Allows flying in any direction",
        Default = false
    })
    
    FlyToggle:OnChanged(function(Value)
        FLY_ENABLED = Value
        updateFly()
    end)

    local WalkSpeedToggle = Tabs.rage:CreateToggle("WalkSpeed", {
        Title = "Walk Speed",
        Description = "Changes character movement speed",
        Default = false
    })
    
    WalkSpeedToggle:OnChanged(function(Value)
        WALKSPEED_ENABLED = Value
        updateWalkSpeed()
    end)

    local JumpPowerToggle = Tabs.rage:CreateToggle("JumpPower", {
        Title = "Jump Power",
        Description = "Changes character jump power",
        Default = false
    })
    
    JumpPowerToggle:OnChanged(function(Value)
        JUMPPOWER_ENABLED = Value
        updateJumpPower()
    end)

    Tabs.rage:CreateSection("Setting up functions")

    Tabs.rage:CreateSlider("FlySpeed", {
        Title = "Fly Speed",
        Description = "Fly speed (1-200)",
        Default = 50,
        Min = 1,
        Max = 200,
        Rounding = 1,
        Callback = function(value)
            currentFlySpeed = value
        end
    })
    
    Tabs.rage:CreateSlider("WalkSpeedValue", {
        Title = "Walk Speed Value",
        Description = "Movement speed (0-100)",
        Default = 16,
        Min = 0,
        Max = 100,
        Rounding = 1,
        Callback = function(value)
            currentWalkSpeed = value
            if WALKSPEED_ENABLED then
                updateWalkSpeed()
            end
        end
    })

    Tabs.rage:CreateSlider("JumpPowerValue", {
        Title = "Jump Power Value",
        Description = "Jump power (1-10000)",
        Default = 50,
        Min = 1,
        Max = 10000,
        Rounding = 1,
        Callback = function(value)
            currentJumpPower = value
            if JUMPPOWER_ENABLED then
                updateJumpPower()
            end
        end
    })

    Tabs.rage:CreateSection("Teleport to the Infinity Stones")

    local GemTeleportDropdown = Tabs.rage:CreateDropdown("TeleportToGems", {
        Title = "Teleport to gems",
        Values = {"Time Stone", "Power Stone", "Darkhold"},
        Multi = false,
        Default = nil,
    })

    local isFirstSelection = true

    GemTeleportDropdown:OnChanged(function(Value)
        if isFirstSelection then
            isFirstSelection = false
            return
        end
        
        local position
        
        if Value == "Time Stone" then
            position = Vector3.new(2381.15, 686.16, 659.72)
        elseif Value == "Power Stone" then
            position = Vector3.new(-344.59, 697.17, 1901.58)
        elseif Value == "Darkhold" then
            position = Vector3.new(-2818.04, 1050.64, 648.63)
        end
        
        if position then
            teleportToPosition(position)
        end
    end)

    SaveManager:SetLibrary(Library)
    InterfaceManager:SetLibrary(Library)
    SaveManager:IgnoreThemeSettings()
    SaveManager:SetIgnoreIndexes({})
    InterfaceManager:SetFolder("FluentScriptHub")
    SaveManager:SetFolder("FluentScriptHub/specific-game")
    InterfaceManager:BuildInterfaceSection(Tabs.settings)
    SaveManager:BuildConfigSection(Tabs.settings)

    Window:SelectTab(1)
    SaveManager:LoadAutoloadConfig()
    
    Library:Notify({
        Title = "Nexus",
        Content = "Interface loaded successfully!",
        Duration = 5
    })
end

-- Initialization
local function fullInitialization()
    if _G.NexusGUIInitialized then
        return
    end
    
    if LocalPlayer.Character then
        updateLimbsList()
    end
    
    local characterConnection
    characterConnection = LocalPlayer.CharacterAdded:Connect(function(character)
        task.wait(1)
        updateLimbsList()
        teleportedObjects = {}
        autoFarmProcessedObjects = {}
        
        if NOCLIP_ENABLED then
            NOCLIP_ENABLED = false
            updateNoClip()
        end
        
        if FLY_ENABLED then
            FLY_ENABLED = false
            updateFly()
        end
        
        if WALKSPEED_ENABLED then
            WALKSPEED_ENABLED = false
            updateWalkSpeed()
        end
        
        if JUMPPOWER_ENABLED then
            JUMPPOWER_ENABLED = false
            updateJumpPower()
        end
        
        if AUTO_FARM_ENABLED then
            task.wait(2)
            returnToZero()
        end
    end)
    
    initializeGUI()
    print("Nexus Loaded")
end

fullInitialization()
